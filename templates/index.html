<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatib1e" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=l.0" />
    <link
      rel="stylesheet"
      type="text/css"
      href="{{ url_for('static', filename='style.css')}}"
    />
    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="judul">
      <img class="logo-img" src="static\02.png" />
      <div class="row">
        <form action="/">
            <button type="submit" class="btn" value="Submit">Enkripsi</button>
        </form>
        <form action="/index2">
            <button type="submit" class="btn" value="Submit">Deskripsi</button>
        </form>
      </div>  
      <div class="decode">
        <div class="wrapper">
          <h1>ENCODE GAMBAR</h1>
          <form action="/encode" method="post" enctype="multipart/form-data">
            <div class="upload-box">
              <input type="file" name="file" class="form-control" autocomplete="off" id="image-upload" required onchange="previewImage(this)" />
              <label for="image-upload" class="upload-button">Unggah</label>
              <div id="image-preview"></div>
            </div>
            <div class="input-box">
              <input type="text" name="message" placeholder="Pesan" required />
            </div>
            <div class="input-box">
              <input type="text" name="key" placeholder="Kunci" required/>
            </div>
            <button type="submit" class="btn" value="Submit" >Mulai</button>
          </form>
        </div>
        <div class="wrapper">
          <h1>HASIL ENCODE</h1>
          <div class="upload-box">
            {% if filename %}
              <img src="{{ url_for('static', filename='uploads/' + filename) }}" alt="Encoded Image"
                style="max-width: 300px; max-height: 300px;" />
            {% endif %}
          </div>
          <div class="btn">
            {% if filename %}
              <form action="{{ url_for('download_file', filename=filename) }}" method="get">
                <button type="submit" class="btn">Download Gambar</button>
              </form>
            {% endif %}
            {% if not filename %}
              <button class="btn" disabled aria-disabled="true">Download Gambar</button>
            {% endif %}
          </div>
        </div>         
        <script>
          function previewImage(input) {
              var reader = new FileReader();
              reader.onload = function (e) {
                  document.getElementById('image-preview').innerHTML = '<img src="' + e.target.result + '" alt="Image Preview" style="max-width: 300px; max-height: 150px;" />';
              };
              reader.readAsDataURL(input.files[0]);
          }
          </script>
      </div>
      <div class="copyr">
        <h2>coppyright@by Syamsul Maarip | Salman Miqdad | Kinanti Anisa F</h2>
      </div>
    </div>
  </body>
</html>